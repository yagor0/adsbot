# Telegram Bot for AppTweak Ads Search

این بات تلگرام برای جستجوی تبلیغات اپلیکیشن‌ها در App Store با استفاده از AppTweak API ساخته شده است.

## ویژگی‌ها

- جستجوی خودکار و تکراری تبلیغات اپلیکیشن‌ها
- تنظیم کشور، زبان و فاصله زمانی جستجو
- دریافت لیست تمام تبلیغات برای کلمه کلیدی
- برگرداندن لینک اپلیکیشن‌ها به فرمت `https://apps.apple.com/app/id{application_id}`
- جستجوی دستی کلمات کلیدی

## تنظیمات

متغیرهای محیطی مورد نیاز:

- `TELEGRAM_BOT_TOKEN`: توکن بات تلگرام
- `APP_TWEAK_API_KEY`: کلید API AppTweak
- `ADMIN_ID`: شناسه عددی ادمین (اختیاری)
- `CHANNEL_ID`: شناسه چنل برای ارسال پیام‌ها (پیش‌فرض: -1003626600006)
- `PORT`: پورت برای اجرا (پیش‌فرض: 8000)

## نصب و اجرا

```bash
pip install -r requirements.txt
python bot.py
```

## استقرار روی Railway

### مراحل استقرار:

1. **آماده‌سازی پروژه:**
   - پروژه را به یک repository در GitHub push کنید

2. **ایجاد پروژه در Railway:**
   - به [Railway](https://railway.com/new) بروید
   - روی "New Project" کلیک کنید
   - "Deploy from GitHub repo" را انتخاب کنید
   - repository خود را انتخاب کنید

3. **تنظیم متغیرهای محیطی:**
   در بخش Variables پروژه، متغیرهای زیر را اضافه کنید:
   ```
   TELEGRAM_BOT_TOKEN=8569195623:AAFrobmCrcnnLzrg-SzXGcRiIxXNzIEdlT4
   APP_TWEAK_API_KEY=CGXefdBhfEpuAJQ-sIf8sEJmi18
   ADMIN_ID=295984673
   CHANNEL_ID=-1003626600006
   ```

4. **Deploy:**
   - Railway به صورت خودکار پروژه را build و deploy می‌کند
   - در بخش Deployments می‌توانید لاگ‌ها را مشاهده کنید

5. **تنظیم چنل:**
   - بات را به چنل `ADS` (یا چنل مورد نظر) اضافه کنید
   - بات را به عنوان **ادمین** در چنل تنظیم کنید (با دسترسی ارسال پیام)
   - چنل ID را در متغیر محیطی `CHANNEL_ID` تنظیم کنید

6. **بررسی:**
   - بات باید به صورت خودکار شروع به کار کند
   - در تلگرام بات را پیدا کرده و `/start` را بزنید
   - با `/setup` تنظیمات را انجام دهید
   - پیام‌ها به چنل ارسال می‌شوند

## استفاده

### جستجوی خودکار (تکراری):

1. بات را در تلگرام پیدا کنید و `/start` را بزنید
2. از دستور `/setup` برای تنظیم استفاده کنید:
   ```
   /setup <کلمه_کلیدی> <کشور> <زبان> <فاصله_زمانی_دقیقه>
   ```
   مثال:
   ```
   /setup "ki video erstellen" de de 5
   ```
   این دستور هر 5 دقیقه برای کلمه "ki video erstellen" در کشور آلمان (de) و زبان آلمانی (de) جستجو می‌کند.

3. با `/start` کار تکراری شروع می‌شود
4. برای توقف از `/stop` استفاده کنید

### جستجوی دستی:

1. یک کلمه کلیدی را به صورت پیام عادی ارسال کنید
2. بات اولین تبلیغ را پیدا کرده و لینک را برمی‌گرداند

## دستورات

- `/start` - شروع بات و نمایش وضعیت کار تکراری
- `/setup <keyword> <country> <language> <interval>` - تنظیم کار تکراری
- `/stop` - توقف کار تکراری

